<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pokémon Favoritos</title>
  <link rel="stylesheet" href="../styles/home.css">

  <!-- biblioteca de icones -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<style>
  body {
    background-color: white;
    font-family: 'Arial', sans-serif;
    text-align: center;
    color: #333;
    margin: 0;
    padding: 0;
  }

  h1 {
    color: #ff8c00;
    font-size: 2em;
    margin-top: 40px;
  }

  .estrela {
    justify-items: center;
    display: flex;
    color: #ffcc00;
    font-size: 1.4em;
  }

  .botao-favoritos {
    background: linear-gradient(90deg, #ffa500, #ff4500);
    color: white;
    border: none;
    border-radius: 30px;
    padding: 12px 30px;
    font-size: 1em;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(255, 140, 0, 0.5);
    margin: 20px 0;
  }

 
  .vazio {

    width: 100px;
    height: 100px;
    border: 3px dashed #ccc;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #aaa;
    flex-direction: column;
  }

  .vazio i {
    font-size: 2em;
    color: #aaa;
  }

  .box-instrucoes {
    background: #0d1b2a;
    color: white;
    width: 80%;
    max-width: 500px;
    margin: 40px auto;
    border-radius: 10px;
    padding: 20px;
    text-align: left;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  }

  .box-instrucoes ul {
    margin-top: 10px;
  }

  .box-instrucoes li {
    margin-bottom: 6px;
  }
</style>
</head>

<body>
  <div id="navbar-placeholder"></div>

  <h1><i class="fa-solid fa-star" style="color: #FFD43B;"></i>POKÉMON FAVORITOS <i class="fa-solid fa-star" style="color: #FFD43B;"></i></h1>
  <p>Sua coleção especial de Pokémon favoritos</p>

  <button class="botao-favoritos"><i class="fa-solid fa-heart"></i> 0 Pokémons Favoritos</button>

  <div class="vazio">
    <i><i class="fa-solid fa-star" style="color: #FFD43B;"></i></i>
    <p>Vazio</p>
  </div>

  <h3>Nenhum Pokémon Favorito</h3>
  <p>Você ainda não adicionou nenhum Pokémon aos seus favoritos.<br>
    Explore as categorias e clique na estrela para favoritar!</p>

  <div class="box-instrucoes">
    <strong>Como adicionar favoritos:</strong>
    <ul>
      <li>Vá para a página "Categoria"</li>
      <li>Encontre um Pokémon que você gosta</li>
      <li>Clique na estrela para favoritar</li>
    </ul>
  </div>

</body>
<script type="module" src="../script/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6P7c0f1F2a2x6N3C4a5B8E9D0F3F2d4D5C6E7F8G9H0I1J2K3L4M5N6O7P8Q9R" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const container = document.querySelector("body");
    const favoritosBrutos = localStorage.getItem("favoritesObject");

    if (!favoritosBrutos) {
      console.log("Nenhum favorito encontrado");
      return;
    }

    const favoritos = JSON.parse(favoritosBrutos);
    const listaPokemons = Object.values(favoritos);

    if (listaPokemons.length === 0) {
      console.log("Lista de favoritos vazia");
      return;
    }

    // Remove a mensagem "vazio"
    document.querySelector(".vazio")?.remove();
    document.querySelector("h3")?.remove();
    document.querySelector("p")?.remove();

    // Atualiza o contador no botão
    const botaoFavoritos = document.querySelector(".botao-favoritos");
    botaoFavoritos.innerHTML = `<i class="fa-solid fa-heart"></i> ${listaPokemons.length} Pokémons Favoritos`;

    // Cria o container das cartas
    const grade = document.createElement("div");
    grade.classList.add("d-flex", "flex-wrap", "justify-content-center", "gap-3");
    container.appendChild(grade);

    // Renderiza cada Pokémon
    listaPokemons.forEach(pokemon => {
      const card = document.createElement("div");
      card.classList.add("card", "shadow", "p-2");
      card.style.width = "160px";
      card.style.borderRadius = "15px";

      card.innerHTML = `
        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png"
             class="card-img-top" alt="${pokemon.nome}">
        <div class="card-body">
          <h5 class="card-title text-capitalize">${pokemon.nome}</h5>
          <button class="btn btn-danger btn-sm remover-favorito" data-id="${pokemon.id}">
            <i class="fa-solid fa-trash"></i> Remover
          </button>
        </div>
      `;

      grade.appendChild(card);
    });

    // Função para remover dos favoritos
    document.querySelectorAll(".remover-favorito").forEach(botao => {
      botao.addEventListener("click", (e) => {
        const id = e.target.closest("button").dataset.id;
        delete favoritos[id];
        localStorage.setItem("favoritesObject", JSON.stringify(favoritos));
        location.reload(); // recarrega para atualizar a tela
      });
    });
  });
</script>


</html>